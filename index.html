<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Handlee&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Custom Cursor with Halo -->
    <div class="cursor-halo" id="cursorHalo"></div>
    <div class="custom-cursor" id="customCursor"></div>
    <!-- Header Navigation -->
    <header class="header">
        <nav class="nav-menu">
            <a href="#intro" class="nav-item active">About me</a>
            <a href="#achievements" class="nav-item">Achievements</a>
            <a href="#experience" class="nav-item">Experience</a>
            <a href="#design-process" class="nav-item">Design Process</a>
            <a href="#projects" class="nav-item">Projects</a>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="scroll-container" id="mainContainer">
        <div class="blackboard">
            <!-- Left Side: Hero Image - FIXED -->
            <div class="left-section">
                <div class="hero-image-wrapper">
                    <div class="tv-screen">
                        <img src="Hero images/hero-image.jpg" alt="Hero" class="hero-image active" id="heroImage1">
                        <img src="Hero images/hero-trophy-1.png" alt="Hero Trophy" class="hero-image" id="heroImage2">
                    </div>
                    <img src="Hero images/tvframe.png" alt="TV Frame" class="tv-frame-img">
                </div>
            </div>

            <!-- Right Side: Sliding Content -->
            <div class="right-content-container" id="rightContent">
                <!-- Slide 1: Introduction -->
                <div class="content-slide intro-slide">
                    <div class="right-section">
                        <div class="intro-section">
                            <h1 class="intro-title">Hi, Welcome to my story.</h1>
                            <h2 class="intro-name">I'm Rupesh Pamaihgari</h2>
                            <h3 class="intro-subtitle">Staff Product Designer @ Sense | AR/VR/XR Developer</h3>
                            <p class="intro-text">
                                I bridge the gap between complex code and human experience. With over <span class="glow-highlight">10 years of
                                experience</span>, I specialize in productizing <span class="glow-highlight">AI Agents</span> and SaaS tools from 0 ‚Üí 1.
                            </p>
                            <p class="intro-text">
                                I have led the end-to-end design of <span class="glow-highlight">10+ complex platforms</span>, crafting every detail from
                                research to release.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Slide 2: Achievements Carousel -->
                <div class="content-slide achievements-slide">
                    <div class="right-section">
                        <div class="achievements-header">
                            <div class="section-subtitle">Achievements - Milestones that define my drive</div>
                        </div>

                        <div class="accordion" id="achievementsAccordion">
                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="achv-panel-1" id="achv-trigger-1">
                                    <span class="accordion-title">Winner: MIT ‚ÄúReality Virtually‚Äù Hackathon (2019) ‚Äî Boston, MA</span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="achv-panel-1" role="region" aria-labelledby="achv-trigger-1" aria-hidden="true">
                                    <p class="accordion-text"><strong>The Challenge:</strong> How can we make roads safer?</p>
                                    <p class="accordion-text"><strong>The Solution:</strong> I developed an AR/VR solution to solve high-demand use cases: helping people drive better, automating driving tests, monitoring cab driver performance, and assisting insurance companies with compliance.</p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="achv-panel-2" id="achv-trigger-2">
                                    <span class="accordion-title">Winner: Bayer Integrated Digital Label Hackathon (2022)</span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="achv-panel-2" role="region" aria-labelledby="achv-trigger-2" aria-hidden="true">
                                    <p class="accordion-text"><strong>The Challenge:</strong> How can we empower farmers with data?</p>
                                    <p class="accordion-text"><strong>The Solution:</strong> I designed an accessible digital solution providing farmers with detailed product-specific information, usage guidelines, and delivery tracking‚Äîdirectly impacting their productivity and profitability.</p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="achv-panel-3" id="achv-trigger-3">
                                    <span class="accordion-title">Winner: HackerEarth‚Äôs First Game Development Hackathon (2016)</span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="achv-panel-3" role="region" aria-labelledby="achv-trigger-3" aria-hidden="true">
                                    <p class="accordion-text"><strong>The Challenge:</strong> Stand out among 10,000+ global developers.</p>
                                    <p class="accordion-text"><strong>The Story:</strong> Winning this highly competitive event in the early stages of my career was a pivotal moment. It validated my skills in game development and fueled the confidence I carry into every project today.</p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="achv-panel-4" id="achv-trigger-4">
                                    <span class="accordion-title">2√ó Consecutive Winner: Sense Internal Star Award</span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="achv-panel-4" role="region" aria-labelledby="achv-trigger-4" aria-hidden="true">
                                    <p class="accordion-text"><strong>The Recognition:</strong> Awarded for ‚ÄúBest Collaboration and Contribution to Success.‚Äù A testament to my belief that great products are built by great teams.</p>
                                </div>
                            </div>
                        </div>

                        <p class="achievements-body">
                            Beyond these, I have been a runner-up and finalist in several other innovation challenges, constantly testing my limits.
                        </p>
                    </div>
                </div>

                <!-- Slide 3: Experience Carousel -->
                <div class="content-slide experience-slide">
                    <div class="right-section">
                        <div class="achievements-header">
                            <h2 class="section-title">Experience</h2>
                            <div class="section-subtitle">From Game Worlds to Enterprise Ecosystems.</div>
                        </div>

                        <p class="experience-body">
                            If you‚Äôre wondering how a game developer participating in AR/VR hackathons evolved into a Staff Product Designer for complex SaaS platforms, here is how the chapters unfold.
                        </p>

                        <div class="accordion" id="experienceAccordion">
                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="exp-panel-1" id="exp-trigger-1">
                                    <span class="accordion-title">2012-2015 <span class="pipe-highlight">|</span> The Spark: Gaming &amp; Empathy</span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="exp-panel-1" role="region" aria-labelledby="exp-trigger-1" aria-hidden="true">
                                    <p class="accordion-text">
                                        My passion for design began before I even graduated. Leading a team of four, I developed games that reached over 500k+ users on the Play Store. This was my crash course in user behavior. Game development taught me that the "User Experience" is the only thing that keeps a player engaged. It was here that I learned to truly empathize with the user.
                                    </p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="exp-panel-2" id="exp-trigger-2">
                                    <span class="accordion-title">2015-19 <span class="pipe-highlight">|</span> Global Scale @ <span class="glow-highlight">Unisys</span></span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="exp-panel-2" role="region" aria-labelledby="exp-trigger-2" aria-hidden="true">
                                    <p class="accordion-text">
                                        I landed my first role as a UX Designer at Unisys. This was my exposure to the global stage. I had the opportunity to design for diverse, high-stakes users‚Äîfrom American public child care systems (USFN) and SAS Cargo logistics in Denmark to the DigiYatra initiative for Bangalore and Singapore Airports. I learned how to design for scale and reliability.
                                    </p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="exp-panel-3" id="exp-trigger-3">
                                    <span class="accordion-title">2019-21 <span class="pipe-highlight">|</span> Social Impact: Blue collar workforce @<span class="glow-highlight">Betterplace</span></span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="exp-panel-3" role="region" aria-labelledby="exp-trigger-3" aria-hidden="true">
                                    <p class="accordion-text">
                                        Joining Betterplace as a Lead Product Designer offered a humbling challenge: designing for India‚Äôs blue-collar workforce. I worked on automated products for background verification, attendance tracking, and job applications. The goal was simplicity and accessibility, ensuring technology bridged gaps rather than creating them.
                                    </p>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <button class="accordion-trigger" type="button" aria-expanded="false" aria-controls="exp-panel-4" id="exp-trigger-4">
                                    <span class="accordion-title">2021 - Present <span class="pipe-highlight">|</span> AI &amp; Automation @<span class="glow-highlight">SenseHQ</span></span>
                                    <span class="accordion-icon" aria-hidden="true">+</span>
                                </button>
                                <div class="accordion-panel" id="exp-panel-4" role="region" aria-labelledby="exp-trigger-4" aria-hidden="true">
                                    <p class="accordion-text">
                                        I joined Sense as a Lead Product Designer and grew into a Staff Product Designer. Over the last 4 years, I have led end-to-end design for complex SaaS tools‚ÄîAutomation Builders, Segment Builders, and Career Site Builders‚Äîthat accelerated recruitment marketing.
                                    </p>
                                    <p class="accordion-text">
                                        Most recently, I have been part of the transformation of these tools into AI Agents, evolving the Sense platform into a self-serving, intelligent colleague for recruiters, enhancing efficiency and productivity at scale.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 4: Design Process -->
                <div class="content-slide design-process-slide">
                    <div class="right-section">
                        <h2 class="section-title">‚ÄîDesign Process &amp; Principles‚Äî</h2>
                        <div class="section-subtitle">How I Work.</div>

                        <div class="design-process-graph" aria-label="Design process diagram">
                            <svg class="dp-svg" viewBox="0 0 1400 360" width="1400" height="360" role="img" aria-label="Research to Launch process with iterative design loop">
                                <defs>
                                    <marker id="dpArrowHead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="dp-arrowhead"></path>
                                    </marker>
                                </defs>

                                <!-- Linear flow arrows -->
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 165 180 C 205 180, 215 180, 255 180"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 365 180 C 405 180, 415 180, 440 210"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 790 180 C 830 180, 840 180, 850 180"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 990 180 C 1030 180, 1040 180, 1050 180"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 1190 180 C 1230 180, 1240 180, 1250 180"></path>

                                <!-- Iteration loop (Validate ‚Üî Design ‚Üî Prototype) -->
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 560 250 C 615 240, 650 215, 680 195"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 680 165 C 650 145, 615 120, 560 110"></path>
                                <path class="dp-path dp-arrow dp-draw" marker-end="url(#dpArrowHead)" d="M 500 140 C 470 165, 470 195, 500 220"></path>

                                <!-- Nodes -->
                                <g class="dp-node" tabindex="0" aria-label="Research" style="--dp-delay: 0s;">
                                    <circle class="dp-circle dp-draw" cx="95" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="95" cy="180" r="70"></circle>
                                    <text class="dp-text" x="95" y="180">Research</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Define" style="--dp-delay: 0.15s;">
                                    <circle class="dp-circle dp-draw" cx="295" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="295" cy="180" r="70"></circle>
                                    <text class="dp-text" x="295" y="180">Define</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Validate" style="--dp-delay: 0.30s;">
                                    <circle class="dp-circle dp-draw" cx="500" cy="95" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="500" cy="95" r="70"></circle>
                                    <text class="dp-text" x="500" y="95">Validate</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Design" style="--dp-delay: 0.45s;">
                                    <circle class="dp-circle dp-draw" cx="500" cy="265" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="500" cy="265" r="70"></circle>
                                    <text class="dp-text" x="500" y="265">Design</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Prototype" style="--dp-delay: 0.60s;">
                                    <circle class="dp-circle dp-draw" cx="720" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="720" cy="180" r="70"></circle>
                                    <text class="dp-text" x="720" y="180">Prototype</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Build" style="--dp-delay: 0.75s;">
                                    <circle class="dp-circle dp-draw" cx="920" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="920" cy="180" r="70"></circle>
                                    <text class="dp-text" x="920" y="180">Build</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="QA test" style="--dp-delay: 0.90s;">
                                    <circle class="dp-circle dp-draw" cx="1120" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="1120" cy="180" r="70"></circle>
                                    <text class="dp-text" x="1120" y="180">QA test</text>
                                </g>

                                <g class="dp-node" tabindex="0" aria-label="Launch" style="--dp-delay: 1.05s;">
                                    <circle class="dp-circle dp-draw" cx="1320" cy="180" r="70"></circle>
                                    <circle class="dp-circle dp-circle-soft dp-draw" cx="1320" cy="180" r="70"></circle>
                                    <text class="dp-text" x="1320" y="180">Launch</text>
                                </g>
                            </svg>
                        </div>

                        <h3 class="principles-heading">Design Principles</h3>
                        <div class="principles-card-stack-container">
                            <div class="principles-card-stack">
                                <div class="principle-item" data-card-index="0">
                                    <div class="principle-title">Thoughtful üòâ</div>
                                    <p class="principle-text">
                                        Innovate with intention. Build simple, delightful experiences through deep user understanding.
                                    </p>
                                </div>

                                <div class="principle-item" data-card-index="1">
                                    <div class="principle-title">Collaborative ü§ú ü§õ</div>
                                    <p class="principle-text">
                                        Design thrives through teamwork and critique. Collective intelligence builds better solutions.
                                    </p>
                                </div>

                                <div class="principle-item" data-card-index="2">
                                    <div class="principle-title">Scalable üöÄ</div>
                                    <p class="principle-text">
                                        Design systems, not pages. Build frameworks that adapt from simple tasks to complex workflows.
                                    </p>
                                </div>

                                <div class="principle-item" data-card-index="3">
                                    <div class="principle-title">Empathetic ü•≥</div>
                                    <p class="principle-text">
                                        Focus on the "Why." Understand users' goals, motivations, and emotional connections.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll Down Indicator -->
    <div class="scroll-indicator" id="scrollIndicator">
        <div class="scroll-arrow">‚Üì</div>
        <p class="scroll-text">Scroll</p>
    </div>

    <script>
        // Custom Elastic Cursor with Halo Effect
        const cursor = document.getElementById('customCursor');
        const halo = document.getElementById('cursorHalo');
        let mouseX = 0;
        let mouseY = 0;
        let cursorX = 0;
        let cursorY = 0;
        let haloX = 0;
        let haloY = 0;
        let prevX = 0;
        let prevY = 0;
        let speed = 0;
        
        // Track mouse position
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            // Calculate speed
            const deltaX = mouseX - prevX;
            const deltaY = mouseY - prevY;
            speed = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            prevX = mouseX;
            prevY = mouseY;
        });
        
        // Smooth cursor and halo animation
        function animateCursor() {
            // Smooth follow for cursor
            cursorX += (mouseX - cursorX) * 0.2;
            cursorY += (mouseY - cursorY) * 0.2;
            
            // Even smoother follow for halo (creates lag effect)
            haloX += (mouseX - haloX) * 0.15;
            haloY += (mouseY - haloY) * 0.15;
            
            // Apply elastic effect based on speed
            const baseSize = 20;
            const maxStretch = 40;
            const stretchAmount = Math.min(speed * 0.5, maxStretch - baseSize);
            
            // Calculate direction of movement
            const angle = Math.atan2(mouseY - cursorY, mouseX - cursorX);
            
            // Apply stretch in direction of movement
            const width = baseSize + stretchAmount;
            const height = baseSize - (stretchAmount * 0.3);
            
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            cursor.style.width = width + 'px';
            cursor.style.height = height + 'px';
            cursor.style.transform = `translate(-50%, -50%) rotate(${angle}rad)`;
            
            // Update halo position
            halo.style.left = haloX + 'px';
            halo.style.top = haloY + 'px';
            
            // Decay speed
            speed *= 0.9;
            
            requestAnimationFrame(animateCursor);
        }
        
        animateCursor();
        
        // Hide default cursor on body
        document.body.style.cursor = 'none';

        // Slide Management
        const slides = document.querySelectorAll('.content-slide');
        const heroImage1 = document.getElementById('heroImage1');
        const heroImage2 = document.getElementById('heroImage2');
        const mainContainer = document.getElementById('mainContainer');
        
        let currentContentSlide = 0;
        let isAnimating = false;

        // Initialize first slide
        slides[0].classList.add('active');
        slides[0].classList.remove('next', 'prev');
        for (let i = 1; i < slides.length; i++) {
            slides[i].classList.add('next');
            slides[i].classList.remove('active', 'prev');
        }

        function updateSlides(newSlide) {
            if (isAnimating || newSlide === currentContentSlide || newSlide < 0 || newSlide >= slides.length) {
                return;
            }

            isAnimating = true;
            const direction = newSlide > currentContentSlide ? 'next' : 'prev';

            // Update current slide
            slides[currentContentSlide].classList.remove('active');
            slides[currentContentSlide].classList.add(direction === 'next' ? 'prev' : 'next');

            // Update new slide
            slides[newSlide].classList.remove('prev', 'next');
            slides[newSlide].classList.add('active');

            // Layout mode: Design Process becomes full-width and scrolls naturally (TV frame moves out)
            document.body.classList.toggle('design-process-mode', newSlide === 3);

            // Scroll Design Process slide to top when it becomes active
            if (newSlide === 3) {
                setTimeout(() => {
                    const designProcessSlide = slides[newSlide];
                    const rightSection = designProcessSlide.querySelector('.right-section');
                    if (rightSection) {
                        rightSection.scrollTop = 0;
                    }
                }, 100);
            }

            // Swap hero images
            if (newSlide === 1) {
                heroImage1.classList.remove('active');
                heroImage2.classList.add('active');
            } else {
                heroImage1.classList.add('active');
                heroImage2.classList.remove('active');
            }

            currentContentSlide = newSlide;

            // Update active menu item
            updateActiveMenuItem(newSlide);

            // Update scroll indicator
            const scrollIndicator = document.getElementById('scrollIndicator');
            if (scrollIndicator) {
                // Hide indicator on last slide (Design Process)
                if (newSlide >= slides.length - 1) {
                    scrollIndicator.classList.add('hidden');
                } else {
                    scrollIndicator.classList.remove('hidden');
                }
            }

            setTimeout(() => {
                isAnimating = false;
            }, 800);
        }

        // Function to update active menu item based on current slide
        function updateActiveMenuItem(slideIndex) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((nav, index) => {
                nav.classList.remove('active');
            });

            // Slides: Intro(0), Achievements(1), Experience(2), Design Process(3)
            // Menu: About me(0), Achievements(1), Experience(2), Design Process(3), Projects(4)
            const mapSlideToNavIndex = (s) => {
                if (s === 0) return 0;
                if (s === 1) return 1;
                if (s === 2) return 2;
                if (s === 3) return 3;
                return 0;
            };

            const activeNavIndex = mapSlideToNavIndex(slideIndex);
            if (navItems[activeNavIndex]) navItems[activeNavIndex].classList.add('active');
        }
        
        // Initialize scroll indicator
        const scrollIndicator = document.getElementById('scrollIndicator');
        if (scrollIndicator && currentContentSlide >= slides.length - 1) {
            scrollIndicator.classList.add('hidden');
        }

        // Wheel scroll handling
        let scrollTimeout;
        mainContainer.addEventListener('wheel', (e) => {
            // Allow native scrolling within the Design Process section.
            const activeSlide = slides[currentContentSlide];
            if (activeSlide && activeSlide.classList.contains('design-process-slide')) {
                const scrollEl = activeSlide.querySelector('.right-section');
                if (scrollEl && scrollEl.scrollHeight > scrollEl.clientHeight) {
                    const atTop = scrollEl.scrollTop <= 0;
                    const atBottom = scrollEl.scrollTop + scrollEl.clientHeight >= scrollEl.scrollHeight - 1;

                    // If we can scroll within the panel, let the browser handle it.
                    if ((e.deltaY < 0 && !atTop) || (e.deltaY > 0 && !atBottom)) {
                        return;
                    }
                }
            }

            e.preventDefault();
            
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                if (e.deltaY > 0) {
                    // Scroll down
                    updateSlides(currentContentSlide + 1);
                } else {
                    // Scroll up
                    updateSlides(currentContentSlide - 1);
                }
            }, 50);
        }, { passive: false });

        // Accordion functionality (Achievements + Experience)
        function initAccordion(accordionEl) {
            const triggers = accordionEl.querySelectorAll('.accordion-trigger');

            function closePanel(trigger) {
                const panelId = trigger.getAttribute('aria-controls');
                const panel = panelId ? document.getElementById(panelId) : null;
                const item = trigger.closest('.accordion-item');

                trigger.setAttribute('aria-expanded', 'false');
                if (item) item.classList.remove('is-open');
                if (panel) {
                    panel.setAttribute('aria-hidden', 'true');
                    panel.style.maxHeight = '0px';
                }
            }

            function openPanel(trigger) {
                const panelId = trigger.getAttribute('aria-controls');
                const panel = panelId ? document.getElementById(panelId) : null;
                const item = trigger.closest('.accordion-item');

                trigger.setAttribute('aria-expanded', 'true');
                if (item) item.classList.add('is-open');
                if (panel) {
                    panel.setAttribute('aria-hidden', 'false');
                    panel.style.maxHeight = panel.scrollHeight + 'px';
                }
            }

            // Initialize panels (closed)
            triggers.forEach((trigger) => closePanel(trigger));

            triggers.forEach((trigger) => {
                trigger.addEventListener('click', () => {
                    const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
                    triggers.forEach((t) => closePanel(t));
                    if (!isExpanded) openPanel(trigger);
                });
            });

            // Keep open panel heights in sync (e.g., when resizing)
            window.addEventListener('resize', () => {
                triggers.forEach((trigger) => {
                    if (trigger.getAttribute('aria-expanded') === 'true') {
                        const panelId = trigger.getAttribute('aria-controls');
                        const panel = panelId ? document.getElementById(panelId) : null;
                        if (panel) panel.style.maxHeight = panel.scrollHeight + 'px';
                    }
                });
            });
        }

        const achievementsAccordion = document.getElementById('achievementsAccordion');
        if (achievementsAccordion) initAccordion(achievementsAccordion);

        const experienceAccordion = document.getElementById('experienceAccordion');
        if (experienceAccordion) initAccordion(experienceAccordion);

        // Experience Carousel functionality
        const expTrack = document.getElementById('expCarouselTrack');
        const expPrevBtn = document.getElementById('expPrevBtn');
        const expNextBtn = document.getElementById('expNextBtn');
        const expCurrentSlideSpan = document.getElementById('expCurrentSlide');
        const expTotalSlidesSpan = document.getElementById('expTotalSlides');
        
        let currentExpSlide = 0;
        const expTotalSlides = document.querySelectorAll('#expCarouselTrack .achievement-card').length;
        if (expTotalSlidesSpan) expTotalSlidesSpan.textContent = expTotalSlides;
        
        function updateExpCarousel() {
            if (expTrack) {
                expTrack.style.transform = `translateX(-${currentExpSlide * 100}%)`;
                if (expCurrentSlideSpan) expCurrentSlideSpan.textContent = currentExpSlide + 1;
            }
        }
        
        if (expPrevBtn && expNextBtn) {
            expPrevBtn.addEventListener('click', () => {
                if (currentExpSlide > 0) {
                    currentExpSlide--;
                    updateExpCarousel();
                }
            });
            
            expNextBtn.addEventListener('click', () => {
                if (currentExpSlide < expTotalSlides - 1) {
                    currentExpSlide++;
                    updateExpCarousel();
                }
            });
        }

        // Navigation menu clicks
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach((item, index) => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                // Map menu items to slides
                // Menu: About me(0), Achievements(1), Experience(2), Design Process(3), Projects(4)
                // Slides: Intro(0), Achievements(1), Experience(2), Design Process(3)
                let targetSlide = 0;
                if (index === 0) targetSlide = 0;      // About me ‚Üí Intro
                else if (index === 1) targetSlide = 1; // Achievements ‚Üí Achievements slide
                else if (index === 2) targetSlide = 2; // Experience ‚Üí Experience slide
                else if (index === 3) targetSlide = 3; // Design Process ‚Üí Design Process slide
                else if (index === 4) targetSlide = 1; // Projects ‚Üí Achievements (no projects section yet)
                
                updateSlides(targetSlide);
                // updateActiveMenuItem is called inside updateSlides, so no need to call it here
            });
        });
        
        // Initialize active menu item on page load
        updateActiveMenuItem(0);

        // Principles cards are now static (no stack / navigation JS needed).
    </script>
</body>
</html>

